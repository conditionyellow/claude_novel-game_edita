# ãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ ã‚¨ãƒ‡ã‚£ã‚¿

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ç›®çš„
æ˜ ç”»ã®ã‚·ãƒ¼ãƒ³ã«ä¼¼ãŸã€Œãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã€ã¨ã„ã†å˜ä½ã‚’åŸºæœ¬æ§‹é€ ã¨ã—ãŸã€Webãƒ™ãƒ¼ã‚¹ã®ãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ ä½œæˆãƒ»ç·¨é›†ãƒ„ãƒ¼ãƒ«ã®é–‹ç™ºã€‚
ã‚¨ãƒ‡ã‚£ã‚¿ã§ä½œæˆã—ãŸã‚²ãƒ¼ãƒ ã¯ã€PCãƒ–ãƒ©ã‚¦ã‚¶ã‚„ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ãƒ—ãƒ¬ã‚¤å¯èƒ½ãªHTML5ã‚²ãƒ¼ãƒ ã¨ã—ã¦å‡ºåŠ›ã•ã‚Œã‚‹ã€‚

### ä¸»è¦æ©Ÿèƒ½
- **ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ‡ã‚£ã‚¿**: æœ¬æ–‡ã€é¸æŠè‚¢ã€ç”»åƒã€BGMã‚’å«ã‚€ã‚·ãƒ¼ãƒ³å˜ä½ã§ã®ç·¨é›†
- **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿**: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã«ã‚ˆã‚‹ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•é–“ã®é–¢ä¿‚æ€§ç·¨é›†
- **ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**: Web/ã‚¹ãƒãƒ›ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®ãƒ—ãƒ¬ã‚¤
- **ãƒ“ãƒ«ãƒ‰æ©Ÿèƒ½**: å®Œæˆã—ãŸã‚²ãƒ¼ãƒ ã®é…å¸ƒå¯èƒ½ãªå½¢å¼ã§ã®å‡ºåŠ›

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯é¸æŠç†ç”±

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React + TypeScript**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–ã¨å‹å®‰å…¨æ€§ã®ç¢ºä¿ âœ…
- **Vite**: é«˜é€Ÿãªãƒ“ãƒ«ãƒ‰ã¨HMRï¼ˆHot Module Replacementï¼‰ âœ…
- **Zustand**: è»½é‡çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª âœ…
- **React Flow**: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãªãƒãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã®å®Ÿè£… âœ…

#### ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- **JSONå½¢å¼**: è»½é‡ã§é«˜é€Ÿãƒ‘ãƒ¼ã‚¹ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆ âœ…
- **LocalStorage**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¿å­˜ã¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ âœ…
- **IndexedDB**: å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œ â³ ä»Šå¾Œå®Ÿè£…

#### ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **Tailwind CSS**: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ âœ…
- **Responsive Design**: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ âœ…

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚å¿µ

```
ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ï¼ˆã‚·ãƒ¼ãƒ³ï¼‰
â”œâ”€â”€ æœ¬æ–‡ï¼ˆå¯å¤‰é•·ãƒ†ã‚­ã‚¹ãƒˆï¼‰
â”œâ”€â”€ é¸æŠè‚¢ï¼ˆ1-5å€‹ï¼‰
â”œâ”€â”€ ç”»åƒï¼ˆèƒŒæ™¯ãƒ»ç«‹ã¡çµµï¼‰
â””â”€â”€ BGM

ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—
â”œâ”€â”€ ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆé–‹å§‹ç‚¹ï¼‰
â”œâ”€â”€ ä¸­é–“ï¼ˆåˆ†å²ãƒ»åˆæµãƒ»ãƒ«ãƒ¼ãƒ—å¯¾å¿œï¼‰
â””â”€â”€ ã‚¨ãƒ³ãƒ‰ï¼ˆçµ‚äº†ç‚¹ãƒ»è¤‡æ•°å¯ï¼‰
```

## ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã‚¹ã‚­ãƒ¼ãƒ

```typescript
interface Paragraph {
  id: string;
  type: 'start' | 'middle' | 'end';
  title: string;
  content: {
    text: string;
    choices: Choice[];
    background?: Asset;
    characters?: Character[];
    bgm?: Asset;
  };
  position?: { x: number; y: number }; // ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿ç”¨
  metadata: {
    created: Date;
    modified: Date;
    tags?: string[];
  };
}

interface Choice {
  id: string;
  text: string;
  targetParagraphId: string;
  condition?: Condition; // æ¡ä»¶åˆ†å²ç”¨ï¼ˆå°†æ¥æ‹¡å¼µï¼‰
}

interface Asset {
  id: string;
  name: string;
  url: string;
  type: 'image' | 'audio';
  metadata: {
    size: number;
    format: string;
    duration?: number; // éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ç”¨
  };
}

interface Character {
  id: string;
  name: string;
  sprite: Asset;
  position: 'left' | 'center' | 'right';
  expression?: string;
}
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚­ãƒ¼ãƒ

```typescript
interface NovelProject {
  id: string;
  title: string;
  description: string;
  version: string;
  paragraphs: Paragraph[];
  assets: Asset[];
  characters: Character[];
  settings: {
    defaultFont: string;
    defaultFontSize: number;
    themeColors: ThemeColors;
    resolution: { width: number; height: number };
  };
  metadata: {
    created: Date;
    modified: Date;
    author: string;
  };
}
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
ã‚¨ãƒ‡ã‚£ã‚¿ â†’ JSON Project File â†’ ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ  â†’ HTML5 Game
    â†•                    â†•
  ãƒ­ãƒ¼ã‚«ãƒ«DB            CDN Assets
```

## ç¾åœ¨å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ âœ…

### ã‚¨ãƒ‡ã‚£ã‚¿ã‚³ã‚¢æ©Ÿèƒ½
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†**: æ–°è¦ä½œæˆã€è‡ªå‹•ä¿å­˜ï¼ˆLocalStorageï¼‰
- **ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ç·¨é›†**: ã‚¿ã‚¤ãƒˆãƒ«ã€æœ¬æ–‡ã€ã‚¿ã‚¤ãƒ—å¤‰æ›´
- **é¸æŠè‚¢ã‚·ã‚¹ãƒ†ãƒ **: è¿½åŠ ã€ç·¨é›†ã€å‰Šé™¤ã€æ¥ç¶šè¨­å®šï¼ˆ1-5å€‹ï¼‰
- **æ–°è¦ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä½œæˆ**: é¸æŠè‚¢ã‹ã‚‰ç›´æ¥æ–°ã—ã„ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã‚’ä½œæˆãƒ»æ¥ç¶š
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åæ˜ **: ç·¨é›†å†…å®¹ã®å³åº§åæ˜ ã¨ã‚µã‚¤ãƒ‰ãƒãƒ¼æ›´æ–°

### UI/UXã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **ãƒ„ãƒ¼ãƒ«ãƒãƒ¼**: ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆï¼ˆã‚¨ãƒ‡ã‚£ã‚¿/ãƒ•ãƒ­ãƒ¼/ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰ã€ä¿å­˜çŠ¶æ…‹è¡¨ç¤º
- **ã‚µã‚¤ãƒ‰ãƒãƒ¼**: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä¸€è¦§ã€ã‚¿ã‚¤ãƒ—è¡¨ç¤ºã€é¸æŠãƒ»å‰Šé™¤æ©Ÿèƒ½
- **ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿**: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•è©³ç´°ç·¨é›†ã€é¸æŠè‚¢ç®¡ç†
- **é¸æŠè‚¢ã‚¨ãƒ‡ã‚£ã‚¿**: ãƒ†ã‚­ã‚¹ãƒˆç·¨é›†ã€æ¥ç¶šå…ˆé¸æŠã€æ–°è¦ä½œæˆãƒœã‚¿ãƒ³

### çŠ¶æ…‹ç®¡ç†
- **Zustand Store**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ã€é¸æŠçŠ¶æ…‹ã€ç·¨é›†çŠ¶æ…‹ã®ç®¡ç†
- **å‹å®‰å…¨æ€§**: TypeScriptå®Œå…¨å¯¾å¿œ
- **æ°¸ç¶šåŒ–**: LocalStorageè‡ªå‹•ä¿å­˜ãƒ»å¾©å…ƒ

### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•æ¥ç¶šã®æ¤œè¨¼
- **UIåˆ¶é™**: æœ€å¤§é¸æŠè‚¢æ•°ã€å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯
- **ã‚¨ãƒ©ãƒ¼è¡¨ç¤º**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

## ã‚¨ãƒ‡ã‚£ã‚¿æ©Ÿèƒ½ä»•æ§˜

### ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ç·¨é›†ç”»é¢

#### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ„ãƒ¼ãƒ«ãƒãƒ¼      â”‚ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ãƒªã‚¹ãƒˆâ”‚ ç·¨é›†ã‚¨ãƒªã‚¢      â”‚
â”‚                 â”‚ - æœ¬æ–‡å…¥åŠ›      â”‚
â”‚                 â”‚ - é¸æŠè‚¢ç·¨é›†    â”‚
â”‚                 â”‚ - ã‚¢ã‚»ãƒƒãƒˆè¨­å®š  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç·¨é›†æ©Ÿèƒ½
- **ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ç·¨é›†**: ã‚¿ã‚¤ãƒˆãƒ«ã€æœ¬æ–‡ã€ã‚¿ã‚¤ãƒ—ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆ/ä¸­é–“/ã‚¨ãƒ³ãƒ‰ï¼‰ã®ç·¨é›† âœ…
- **é¸æŠè‚¢ç®¡ç†**: å‹•çš„ãªè¿½åŠ ãƒ»å‰Šé™¤ãƒ»ä¸¦ã³æ›¿ãˆï¼ˆæœ€å¤§5å€‹ï¼‰ âœ…
- **æ¥ç¶šå…ˆè¨­å®š**: æ—¢å­˜ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã¾ãŸã¯æ–°è¦ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä½œæˆã§ã®æ¥ç¶š âœ…
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¿å­˜**: è‡ªå‹•çš„ãªãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¿å­˜ âœ…
- **ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿**: æœ¬æ–‡ã®è£…é£¾ï¼ˆå¤ªå­—ã€è‰²ã€ã‚µã‚¤ã‚ºç­‰ï¼‰â³ ä»Šå¾Œå®Ÿè£…
- **ã‚¢ã‚»ãƒƒãƒˆé¸æŠ**: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã«ã‚ˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ  â³ ä»Šå¾Œå®Ÿè£…

### ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿ âœ…

#### React Flowå®Ÿè£…
```typescript
// ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—å®šç¾©
const nodeTypes = {
  paragraph: ParagraphNode, // start/middle/endã‚¿ã‚¤ãƒ—å¯¾å¿œ
};

// ã‚¨ãƒƒã‚¸ï¼ˆæ¥ç¶šç·šï¼‰è‡ªå‹•ç”Ÿæˆ
const createEdgesFromChoices = () => {
  // é¸æŠè‚¢ã‹ã‚‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã¸ã®æ¥ç¶šç·šã‚’è‡ªå‹•ç”Ÿæˆ
  // ãƒ©ãƒ™ãƒ«ä»˜ãã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
};
```

#### å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ âœ…
- **ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—**: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•é…ç½®ã¨ä½ç½®ä¿å­˜
- **è‡ªå‹•ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: startâ†’middleâ†’endã®è«–ç†çš„é…ç½®
- **ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒ‰**: ã‚¿ã‚¤ãƒ—åˆ¥è¦–è¦šçš„åŒºåˆ¥ï¼ˆè‰²ãƒ»ã‚¢ã‚¤ã‚³ãƒ³ï¼‰
- **ã‚¨ãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ **: é¸æŠè‚¢ã‹ã‚‰ã®è‡ªå‹•æ¥ç¶šç·šç”Ÿæˆ
- **ã‚¨ãƒ‡ã‚£ã‚¿é€£æº**: ãƒãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ã§ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ç·¨é›†
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•å¤‰æ›´ã®å³åº§åæ˜ 

### UI/UXã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

```typescript
// ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ
interface EditorComponents {
  Toolbar: {
    FileMenu: React.FC;
    EditMenu: React.FC;
    ViewMenu: React.FC;
  };
  Sidebar: {
    ParagraphList: React.FC;
    AssetLibrary: React.FC;
    ProjectSettings: React.FC;
  };
  MainArea: {
    FlowEditor: React.FC;
    ParagraphEditor: React.FC;
    Preview: React.FC;
  };
  Modal: {
    AssetUpload: React.FC;
    Export: React.FC;
    Settings: React.FC;
  };
}
```

## ã‚¢ã‚»ãƒƒãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

### é–‹ç™ºæ™‚ã®ç®¡ç†

#### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 
```
project/
â”œâ”€â”€ paragraphs.json
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ backgrounds/
â”‚   â”‚   â””â”€â”€ characters/
â”‚   â””â”€â”€ audio/
â”‚       â”œâ”€â”€ bgm/
â”‚       â””â”€â”€ se/
â””â”€â”€ metadata.json
```

#### ã‚¢ã‚»ãƒƒãƒˆå‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
1. **ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã€ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
2. **æœ€é©åŒ–**: ç”»åƒãƒªã‚µã‚¤ã‚ºã€éŸ³å£°åœ§ç¸®
3. **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã€ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
4. **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åŒ–**: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºã¨ç™»éŒ²

### é…å¸ƒæ™‚ã®ç®¡ç†

#### CDNæ´»ç”¨æˆ¦ç•¥
```typescript
interface AssetDeployment {
  strategy: 'cdn' | 'embedded' | 'hybrid';
  cdn: {
    provider: 'cloudfront' | 'cloudflare' | 'custom';
    caching: CacheConfig;
    compression: boolean;
  };
  fallback: {
    embedded: Asset[]; // å°ã‚µã‚¤ã‚ºãƒ•ã‚¡ã‚¤ãƒ«
    lazy: boolean; // é…å»¶èª­ã¿è¾¼ã¿
  };
}
```

#### æœ€é©åŒ–æ‰‹æ³•
- **ç”»åƒ**: WebPå¤‰æ›ã€Progressive JPEG
- **éŸ³å£°**: MP3/OGGå¤‰æ›ã€ãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆèª¿æ•´
- **é…å»¶èª­ã¿è¾¼ã¿**: Intersection Observerä½¿ç”¨
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥**: Service Workerå®Ÿè£…

### ã‚¢ã‚»ãƒƒãƒˆå‚ç…§ã‚·ã‚¹ãƒ†ãƒ 

```typescript
// ã‚¢ã‚»ãƒƒãƒˆå‚ç…§ã®å®Ÿè£…
class AssetManager {
  async loadAsset(id: string): Promise<Asset> {
    // 1. ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª
    // 2. CDNã‹ã‚‰å–å¾—
    // 3. ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
  }
  
  preloadAssets(paragraphId: string): Promise<Asset[]> {
    // æ¬¡ã®ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã®ã‚¢ã‚»ãƒƒãƒˆã‚’å…ˆèª­ã¿
  }
}
```

## ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 

### HTML5ã‚²ãƒ¼ãƒ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ è¨­è¨ˆ

#### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
Novel Game Runtime
â”œâ”€â”€ Game Engine (Lightweight)
â”‚   â”œâ”€â”€ Scene Manager
â”‚   â”œâ”€â”€ Asset Loader
â”‚   â”œâ”€â”€ Audio Manager
â”‚   â””â”€â”€ Save/Load System
â”œâ”€â”€ UI Components
â”‚   â”œâ”€â”€ Text Display
â”‚   â”œâ”€â”€ Choice Buttons
â”‚   â”œâ”€â”€ Image Renderer
â”‚   â””â”€â”€ Menu System
â””â”€â”€ Data Layer
    â”œâ”€â”€ Story Data (JSON)
    â”œâ”€â”€ Save Data (LocalStorage)
    â””â”€â”€ Settings (LocalStorage)
```

#### å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
game-output/
â”œâ”€â”€ index.html          # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ game.js             # ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ³ã‚¸ãƒ³
â”œâ”€â”€ story.json          # ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ assets/             # æœ€é©åŒ–æ¸ˆã¿ã‚¢ã‚»ãƒƒãƒˆ
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ audio/
â”œâ”€â”€ manifest.json       # PWAè¨­å®š
â””â”€â”€ sw.js              # Service Worker
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

#### ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆ
```css
/* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å„ªå…ˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ */
.game-container {
  max-width: 1200px;
  margin: 0 auto;
}

@media (max-width: 768px) {
  /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œ */
}

@media (max-width: 480px) {
  /* ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å¯¾å¿œ */
}
```

#### ã‚¿ãƒƒãƒæ“ä½œå¯¾å¿œ
```typescript
interface TouchControls {
  tap: () => void;          // ãƒ†ã‚­ã‚¹ãƒˆé€ã‚Š
  longPress: () => void;    // ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º
  swipe: {
    left: () => void;       // å±¥æ­´è¡¨ç¤º
    right: () => void;      // æ—©é€ã‚Š
  };
}
```

### PWAæ©Ÿèƒ½å®Ÿè£…

#### Service Worker
```typescript
// ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
const CACHE_STRATEGY = {
  runtime: 'cache-first',     // ãƒ©ãƒ³ã‚¿ã‚¤ãƒ 
  assets: 'stale-while-revalidate', // ã‚¢ã‚»ãƒƒãƒˆ
  data: 'network-first'       // ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿
};
```

#### Web App Manifest
```json
{
  "name": "Generated Novel Game",
  "short_name": "Novel",
  "description": "Interactive novel game",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#ffffff",
  "icons": [...]
}
```

## é–‹ç™ºç’°å¢ƒãƒ»å®Ÿè£…è¨ˆç”»

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

#### ä¸»è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "typescript": "^5.0.2",
    "zustand": "^4.4.1",
    "react-hook-form": "^7.45.4",
    "lucide-react": "^0.279.0",
    "nanoid": "^4.0.2",
    "clsx": "^2.0.0"
  },
  "devDependencies": {
    "vite": "^4.4.5",
    "@vitejs/plugin-react": "^4.0.3",
    "tailwindcss": "latest",
    "@tailwindcss/postcss": "latest",
    "autoprefixer": "latest",
    "eslint": "^8.45.0",
    "prettier": "^3.0.0",
    "@testing-library/react": "^13.4.0"
  }
}
```

#### ä»Šå¾Œè¿½åŠ äºˆå®š
```json
{
  "dependencies": {
    "reactflow": "^11.11.4", // âœ… å®Ÿè£…æ¸ˆã¿
    "@dnd-kit/core": "^6.0.8", // âœ… å®Ÿè£…æ¸ˆã¿
    "@dnd-kit/sortable": "^7.0.2" // âœ… å®Ÿè£…æ¸ˆã¿
  }
}
```

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
```
novel-game-editor/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ âœ…
â”‚   â”‚   â”œâ”€â”€ Editor/        # ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã‚¨ãƒ‡ã‚£ã‚¿é–¢é€£ âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ EditorLayout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Toolbar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ParagraphEditor.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChoiceEditor.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Preview.tsx
â”‚   â”‚   â”œâ”€â”€ Flow/          # ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿ âœ…
â”‚   â”‚   â”‚   â”œâ”€â”€ FlowEditor.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ParagraphNode.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChoiceEdge.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ StartNode.tsx
â”‚   â”‚   â”‚   â””â”€â”€ EndNode.tsx
â”‚   â”‚   â””â”€â”€ UI/            # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ âœ…
â”‚   â”‚       â”œâ”€â”€ Button.tsx
â”‚   â”‚       â”œâ”€â”€ Input.tsx
â”‚   â”‚       â”œâ”€â”€ Textarea.tsx
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ stores/           # çŠ¶æ…‹ç®¡ç† âœ…
â”‚   â”‚   â””â”€â”€ editorStore.ts
â”‚   â”œâ”€â”€ types/            # TypeScriptå‹å®šç¾© âœ…
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/            # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ âœ…
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ hooks/            # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ â³
â”‚   â”œâ”€â”€ runtime/          # ã‚²ãƒ¼ãƒ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  â³
â”‚   â””â”€â”€ test/             # ãƒ†ã‚¹ãƒˆè¨­å®š âœ…
â”‚       â””â”€â”€ setup.ts
â”œâ”€â”€ public/               # é™çš„ã‚¢ã‚»ãƒƒãƒˆ âœ…
â”œâ”€â”€ dist/                 # ãƒ“ãƒ«ãƒ‰å‡ºåŠ› âœ…
â”œâ”€â”€ docs/                 # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ â³
â””â”€â”€ CLAUDE.md            # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä»•æ§˜æ›¸ âœ…
```

### æ®µéšçš„é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

#### Phase 1: åŸºæœ¬ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆ4é€±é–“ï¼‰âœ… **å®Œäº†**
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–ã¨ãƒ™ãƒ¼ã‚¹è¨­å®š
- [x] ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä½œæˆãƒ»ç·¨é›†æ©Ÿèƒ½
- [x] åŸºæœ¬çš„ãªJSONä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰
- [x] ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
- [x] é¸æŠè‚¢ç·¨é›†ã¨æ¥ç¶šæ©Ÿèƒ½
- [x] æ–°è¦ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä½œæˆæ©Ÿèƒ½

#### Phase 2: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆ3é€±é–“ï¼‰âœ… **å®Œäº†**
- [x] React Flowçµ±åˆ
- [x] ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ¥ç¶šæ©Ÿèƒ½
- [x] ãƒãƒ¼ãƒ‰ã®è‡ªå‹•é…ç½®
- [x] ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆstart/middle/endã‚¿ã‚¤ãƒ—åˆ¥ï¼‰
- [x] ã‚¨ãƒƒã‚¸ï¼ˆæ¥ç¶šç·šï¼‰ã‚·ã‚¹ãƒ†ãƒ 
- [x] ã‚¨ãƒ‡ã‚£ã‚¿ã¨ã®é€£æºæ©Ÿèƒ½

#### Phase 3: ã‚¢ã‚»ãƒƒãƒˆç®¡ç†ï¼ˆ3é€±é–“ï¼‰
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- [ ] ç”»åƒãƒ»éŸ³å£°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- [ ] ã‚¢ã‚»ãƒƒãƒˆæœ€é©åŒ–ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- [ ] CDNé€£æºæº–å‚™

#### Phase 4: ã‚²ãƒ¼ãƒ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼ˆ4é€±é–“ï¼‰
- [ ] è»½é‡ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ³ã‚¸ãƒ³
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–UI
- [ ] ã‚»ãƒ¼ãƒ–ãƒ»ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- [ ] PWAå¯¾å¿œ

#### Phase 5: ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ2é€±é–“ï¼‰
- [ ] è‡ªå‹•ãƒ“ãƒ«ãƒ‰ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- [ ] ã‚¢ã‚»ãƒƒãƒˆæœ€é©åŒ–
- [ ] é…å¸ƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç”Ÿæˆ
- [ ] ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè‡ªå‹•åŒ–

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### ãƒ†ã‚¹ãƒˆåˆ†é¡
```typescript
// ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
describe('ParagraphEditor', () => {
  test('should create new paragraph', () => {});
  test('should validate choice connections', () => {});
});

// çµ±åˆãƒ†ã‚¹ãƒˆ
describe('FlowEditor Integration', () => {
  test('should connect paragraphs correctly', () => {});
});

// E2Eãƒ†ã‚¹ãƒˆ
describe('Editor Workflow', () => {
  test('should create and build complete game', () => {});
});
```

#### ãƒ†ã‚¹ãƒˆç’°å¢ƒ
- **Unit/Integration**: Vitest + React Testing Library
- **E2E**: Playwright
- **Visual Regression**: Chromatic

### å“è³ªç®¡ç†

#### ã‚³ãƒ¼ãƒ‰å“è³ª
```json
{
  "scripts": {
    "lint": "eslint src --ext .ts,.tsx",
    "type-check": "tsc --noEmit",
    "test": "vitest",
    "test:e2e": "playwright test"
  }
}
```

#### Git Hooks
```json
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  }
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

#### ã‚¨ãƒ‡ã‚£ã‚¿æ€§èƒ½
- åˆæœŸãƒ­ãƒ¼ãƒ‰: < 3ç§’
- ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä½œæˆ: < 100ms
- ãƒ•ãƒ­ãƒ¼æç”»: < 500ms (100ãƒãƒ¼ãƒ‰)
- ãƒ“ãƒ«ãƒ‰æ™‚é–“: < 30ç§’

#### ãƒ©ãƒ³ã‚¿ã‚¤ãƒ æ€§èƒ½
- ã‚²ãƒ¼ãƒ èµ·å‹•: < 2ç§’
- ã‚·ãƒ¼ãƒ³é·ç§»: < 300ms
- ã‚¢ã‚»ãƒƒãƒˆèª­ã¿è¾¼ã¿: < 1ç§’

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

#### å…¥åŠ›æ¤œè¨¼
- XSSãƒ—ãƒ­ãƒ†ã‚¯ã‚·ãƒ§ãƒ³
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—æ¤œè¨¼
- ã‚µã‚¤ã‚ºåˆ¶é™

#### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æš—å·åŒ–
- æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®å¤–éƒ¨é€ä¿¡é˜²æ­¢
- CSPï¼ˆContent Security Policyï¼‰è¨­å®š

---

## é–‹ç™ºçŠ¶æ³ã‚µãƒãƒªãƒ¼

### âœ… å®Œäº†æ¸ˆã¿æ©Ÿèƒ½
1. **åŸºæœ¬ã‚¨ãƒ‡ã‚£ã‚¿æ©Ÿèƒ½**: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
2. **é¸æŠè‚¢ã‚·ã‚¹ãƒ†ãƒ **: è¿½åŠ ãƒ»ç·¨é›†ãƒ»æ¥ç¶šï¼ˆ1-5å€‹åˆ¶é™ï¼‰
3. **æ–°è¦ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä½œæˆ**: é¸æŠè‚¢ã‹ã‚‰ç›´æ¥ä½œæˆãƒ»æ¥ç¶š
4. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¿å­˜**: LocalStorageè‡ªå‹•ä¿å­˜
5. **UI/UXã‚·ã‚¹ãƒ†ãƒ **: Tailwind CSS + å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
6. **çŠ¶æ…‹ç®¡ç†**: Zustand + TypeScriptå‹å®‰å…¨æ€§
7. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ **: ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ
8. **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ‡ã‚£ã‚¿**: React Flowçµ±åˆãƒ»ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒ‰ãƒ»ã‚¨ãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 

### â³ æ¬¡å›å®Ÿè£…äºˆå®š
1. **ã‚¢ã‚»ãƒƒãƒˆç®¡ç†**: ç”»åƒãƒ»éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œ
2. **ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ã‚¤ãƒ†ã‚¹ãƒˆ
3. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½**: HTML5ã‚²ãƒ¼ãƒ å‡ºåŠ›
4. **ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿**: æœ¬æ–‡è£…é£¾æ©Ÿèƒ½
5. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†**: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

### ğŸš€ ç¾åœ¨ã®é–‹ç™ºç’°å¢ƒ
- **ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼**: Python HTTP Server (port 8000)
- **ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ **: Vite + TypeScript
- **é–‹ç™ºãƒ¢ãƒ¼ãƒ‰**: HMRå¯¾å¿œ
- **ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ**: Chrome, Firefox, Safari
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ/ã‚¹ãƒãƒ›å¯¾å¿œ

---

ã“ã®CLAUDE.mdã¯ã€ãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ ã‚¨ãƒ‡ã‚£ã‚¿ã®åŒ…æ‹¬çš„ãªè¨­è¨ˆæ›¸ã¨ã—ã¦ã€é–‹ç™ºãƒãƒ¼ãƒ å…¨ä½“ã§ã®èªè­˜çµ±ä¸€ã¨åŠ¹ç‡çš„ãªé–‹ç™ºé€²è¡Œã‚’æ”¯æ´ã—ã¾ã™ã€‚